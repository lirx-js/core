sequenceDiagram

participant observable as observable
participant toPromiseLast as toPromiseLast(observable)
participant THEN as .then
participant CATCH as .catch

observable->>toPromiseLast: next: value1
observable->>toPromiseLast: next: value2
observable->>toPromiseLast: next: value3

alt if complete
    observable->>toPromiseLast: complete
    toPromiseLast->>THEN: value3
else if error
    observable->>toPromiseLast: error: error
    toPromiseLast->>CATCH:  error
end


